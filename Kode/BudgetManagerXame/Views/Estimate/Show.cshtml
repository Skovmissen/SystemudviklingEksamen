@model BudgetManagerXame.Models.Estimate

@{
    ViewBag.Title = "Create";
}
@{


    <table class="table table-bordered">
        <tr>
            <th>
                Budget år: @ViewBag.Year
            </th>
            @foreach (var period in Model.Period)
            {
                <th class="col-lg-2">@period.Name</th>
            }
        </tr>
        @foreach (var group in Model.FinanceGroup)
        {
            double total = 0;
            <tr>
                <td><b>@group.Name</b></td>
                @foreach (var per in Model.Period)
                {
                    foreach (var account in Model.FinanceAccount)
                    {
                        if (account.FinanceGroup == group.Name)
                        {
                            foreach (var estimate in Model.Fap)
                            {
                                if (estimate.AccountId == account.AccountId && estimate.PeriodId == per.Id)
                                {
                                    total += estimate.Estimate;
                                }

                            }


                        }


                    }
                    <td class="text-right"><b>@total</b></td>
                    total = 0;
                }


            </tr>
            foreach (var account in Model.FinanceAccount)
            {
                if (account.FinanceGroup == group.Name)
                {
                    <tr>
                        <td>
                            @account.Name
                        </td>

                        @foreach (var estimate in Model.Fap)
                        {
                            if (estimate.AccountId == account.AccountId)
                            {
                                <td class="text-right">@estimate.Estimate</td>
                            }

                        }

                    </tr>
                }

            }
        }
    </table>
}
